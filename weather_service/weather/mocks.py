from httpx import Response, Request, HTTPStatusError
from unittest.mock import Mock


default_weather_request_cities_json = [
    {"city_id": "3439525"},
    {"city_id": "3439781"},
    {"city_id": "3440645"},
    {"city_id": "3442098"},
    {"city_id": "3442778"},
    {"city_id": "3443341"},
    {"city_id": "3442233"},
    {"city_id": "3440781"},
    {"city_id": "3441572"},
    {"city_id": "3441575"},
    {"city_id": "3443207"},
    {"city_id": "3442546"},
    {"city_id": "3441287"},
    {"city_id": "3441242"},
    {"city_id": "3441686"},
    {"city_id": "3440639"},
    {"city_id": "3441354"},
    {"city_id": "3442057"},
    {"city_id": "3442585"},
    {"city_id": "3442727"},
    {"city_id": "3439705"},
    {"city_id": "3441890"},
    {"city_id": "3443411"},
    {"city_id": "3440054"},
    {"city_id": "3441684"},
    {"city_id": "3440711"},
    {"city_id": "3440714"},
    {"city_id": "3440696"},
    {"city_id": "3441894"},
    {"city_id": "3443173"},
    {"city_id": "3441702"},
    {"city_id": "3442007"},
    {"city_id": "3441665"},
    {"city_id": "3440963"},
    {"city_id": "3443413"},
    {"city_id": "3440033"},
    {"city_id": "3440034"},
    {"city_id": "3440571"},
    {"city_id": "3443025"},
    {"city_id": "3441243"},
    {"city_id": "3440789"},
    {"city_id": "3442568"},
    {"city_id": "3443737"},
    {"city_id": "3440771"},
    {"city_id": "3440777"},
    {"city_id": "3442597"},
    {"city_id": "3442587"},
    {"city_id": "3439749"},
    {"city_id": "3441358"},
    {"city_id": "3442980"},
    {"city_id": "3442750"},
    {"city_id": "3443352"},
    {"city_id": "3442051"},
    {"city_id": "3441442"},
    {"city_id": "3442398"},
    {"city_id": "3442163"},
    {"city_id": "3443533"},
    {"city_id": "3440942"},
    {"city_id": "3442720"},
    {"city_id": "3441273"},
    {"city_id": "3442071"},
    {"city_id": "3442105"},
    {"city_id": "3442683"},
    {"city_id": "3443030"},
    {"city_id": "3441011"},
    {"city_id": "3440925"},
    {"city_id": "3440021"},
    {"city_id": "3441292"},
    {"city_id": "3480823"},
    {"city_id": "3440379"},
    {"city_id": "3442106"},
    {"city_id": "3439696"},
    {"city_id": "3440063"},
    {"city_id": "3442231"},
    {"city_id": "3442926"},
    {"city_id": "3442050"},
    {"city_id": "3440698"},
    {"city_id": "3480819"},
    {"city_id": "3442450"},
    {"city_id": "3442584"},
    {"city_id": "3443632"},
    {"city_id": "3441122"},
    {"city_id": "3441475"},
    {"city_id": "3440791"},
    {"city_id": "3480818"},
    {"city_id": "3439780"},
    {"city_id": "3443861"},
    {"city_id": "3440780"},
    {"city_id": "3442805"},
    {"city_id": "7838849"},
    {"city_id": "3440581"},
    {"city_id": "3440830"},
    {"city_id": "3443756"},
    {"city_id": "3443758"},
    {"city_id": "3443013"},
    {"city_id": "3439590"},
    {"city_id": "3439598"},
    {"city_id": "3439619"},
    {"city_id": "3439622"},
    {"city_id": "3439652"},
    {"city_id": "3439659"},
    {"city_id": "3439661"},
    {"city_id": "3439725"},
    {"city_id": "3439748"},
    {"city_id": "3439787"},
    {"city_id": "3439831"},
    {"city_id": "3439838"},
    {"city_id": "3439902"},
    {"city_id": "3440055"},
    {"city_id": "3440076"},
    {"city_id": "3440394"},
    {"city_id": "3440400"},
    {"city_id": "3440541"},
    {"city_id": "3440554"},
    {"city_id": "3440577"},
    {"city_id": "3440580"},
    {"city_id": "3440596"},
    {"city_id": "3440653"},
    {"city_id": "3440654"},
    {"city_id": "3440684"},
    {"city_id": "3440705"},
    {"city_id": "3440747"},
    {"city_id": "3440762"},
    {"city_id": "3440879"},
    {"city_id": "3440939"},
    {"city_id": "3440985"},
    {"city_id": "3441074"},
    {"city_id": "3441114"},
    {"city_id": "3441377"},
    {"city_id": "3441476"},
    {"city_id": "3441481"},
    {"city_id": "3441483"},
    {"city_id": "3441577"},
    {"city_id": "3441659"},
    {"city_id": "3441674"},
    {"city_id": "3441803"},
    {"city_id": "3441954"},
    {"city_id": "3441988"},
    {"city_id": "3442058"},
    {"city_id": "3442138"},
    {"city_id": "3442206"},
    {"city_id": "3442221"},
    {"city_id": "3442236"},
    {"city_id": "3442238"},
    {"city_id": "3442299"},
    {"city_id": "3442716"},
    {"city_id": "3442766"},
    {"city_id": "3442803"},
    {"city_id": "3442939"},
    {"city_id": "3443061"},
    {"city_id": "3443183"},
    {"city_id": "3443256"},
    {"city_id": "3443280"},
    {"city_id": "3443289"},
    {"city_id": "3443342"},
    {"city_id": "3443356"},
    {"city_id": "3443588"},
    {"city_id": "3443631"},
    {"city_id": "3443644"},
    {"city_id": "3443697"},
    {"city_id": "3443909"},
    {"city_id": "3443928"},
    {"city_id": "3443952"},
    {"city_id": "3480812"},
    {"city_id": "3480820"},
    {"city_id": "3480822"},
    {"city_id": "3480825"},
]


open_weather_success_response = {
    "coord": {"lon": -57.6333, "lat": -32.6833},
    "weather": [
        {"id": 800, "main": "Clear", "description": "clear sky", "icon": "01n"}
    ],
    "base": "stations",
    "main": {
        "temp": 289.99,
        "feels_like": 290.03,
        "temp_min": 289.99,
        "temp_max": 289.99,
        "pressure": 1001,
        "humidity": 88,
        "sea_level": 1001,
        "grnd_level": 992,
    },
    "visibility": 10000,
    "wind": {"speed": 4.68, "deg": 44, "gust": 13.13},
    "clouds": {"all": 0},
    "dt": 1692665478,
    "sys": {"country": "UY", "sunrise": 1692613299, "sunset": 1692653172},
    "timezone": -10800,
    "id": 3439525,
    "name": "Young",
    "cod": 200,
}
open_weather_success_mock = Mock(spec=Response)
open_weather_success_mock.json.return_value = open_weather_success_response
open_weather_success_mock.status_code = 200

open_weather_success_2_response = {
    "coord": {"lon": -54.3833, "lat": -33.2333},
    "weather": [
        {"id": 800, "main": "Clear", "description": "clear sky", "icon": "01d"}
    ],
    "base": "stations",
    "main": {
        "temp": 285.05,
        "feels_like": 283.97,
        "temp_min": 285.05,
        "temp_max": 285.05,
        "pressure": 1007,
        "humidity": 64,
        "sea_level": 1007,
        "grnd_level": 1001,
    },
    "visibility": 10000,
    "wind": {"speed": 1.95, "deg": 160, "gust": 2.41},
    "clouds": {"all": 0},
    "dt": 1692797363,
    "sys": {"country": "UY", "sunrise": 1692785219, "sunset": 1692825233},
    "timezone": -10800,
    "id": 3439781,
    "name": "Treinta y Tres",
    "cod": 200,
}

open_weather_invalid_api_key_response = {
    "cod": 401,
    "message": "Invalid API key. Please see https://openweathermap.org/faq#error401 for more info.",
}
open_weather_invalid_api_key_mock = Mock(spec=Response)
open_weather_invalid_api_key_mock.status_code = 401
open_weather_invalid_api_key_mock.raise_for_status.side_effect = HTTPStatusError(
    open_weather_invalid_api_key_response,
    request=Mock(spec=Request),
    response=open_weather_invalid_api_key_mock,
)

open_weather_city_not_found_response = {
    "cod": "400",
    "message": "AAAAAA is not a city ID",
}
open_weather_city_not_found_mock = Mock(spec=Response)
open_weather_city_not_found_mock.status_code = 400
open_weather_city_not_found_mock.raise_for_status.side_effect = HTTPStatusError(
    open_weather_city_not_found_response,
    request=Mock(spec=Request),
    response=open_weather_city_not_found_mock,
)

open_weather_rate_limit_response = {
    "cod": 429,
    "message": "Your account is temporary blocked due to exceeding of requests limitation of your subscription type. Please choose the proper subscription https://openweathermap.org/price",
}
open_weather_rate_limit_mock = Mock(spec=Response)
open_weather_rate_limit_mock.status_code = 429
open_weather_rate_limit_mock.raise_for_status.side_effect = HTTPStatusError(
    open_weather_rate_limit_response,
    request=Mock(spec=Request),
    response=open_weather_rate_limit_mock,
)
